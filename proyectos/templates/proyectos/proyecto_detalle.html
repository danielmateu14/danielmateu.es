{% extends 'base.html' %}
{% load static %}

{% block title %}{{ proyecto.titulo }} - Daniel Mateu Sánchez{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'proyectos/css/detalle.css' %}">
{% endblock %}

{% block content %}
<!-- Hero del Proyecto -->
<section class="proyecto-detalle-hero-optimizado">
    <div class="container">
        <div class="breadcrumb-custom">
            <a href="{% url 'proyectos:lista_proyectos' %}" class="breadcrumb-link">
                <i class="fas fa-arrow-left me-2"></i>Volver a Proyectos
            </a>
        </div>
        <div class="row align-items-center">
            <div class="col-lg-6">
                <div class="proyecto-info animate-on-scroll">
                    
                    <h1 class="proyecto-titulo-detalle mb-3">{{ proyecto.titulo }}</h1>
                    <p class="proyecto-descripcion-detalle mb-4">{{ proyecto.descripcion }}</p>
                    
                    <!-- Tecnologías integradas -->
                    {% if proyecto.tecnologias.all %}
                    <div class="tecnologias-inline mb-4">
                        <h6 class="tech-label mb-2">
                            <i class="fas fa-code me-2"></i>Tecnologías utilizadas:
                        </h6>
                        <div class="tech-badges-inline">
                            {% for tecnologia in proyecto.tecnologias.all %}
                            <span class="tech-badge-inline" data-tooltip="{{ tecnologia.nombre }}">
                                {% if tecnologia.nombre|lower == 'django' %}
                                    <i class="fab fa-python"></i>
                                {% elif tecnologia.nombre|lower == 'javascript' %}
                                    <i class="fab fa-js-square"></i>
                                {% elif tecnologia.nombre|lower == 'html' or tecnologia.nombre|lower == 'html5' %}
                                    <i class="fab fa-html5"></i>
                                {% elif tecnologia.nombre|lower == 'css' or tecnologia.nombre|lower == 'css3' %}
                                    <i class="fab fa-css3-alt"></i>
                                {% elif tecnologia.nombre|lower == 'bootstrap' %}
                                    <i class="fab fa-bootstrap"></i>
                                {% elif tecnologia.nombre|lower == 'react' %}
                                    <i class="fab fa-react"></i>
                                {% elif tecnologia.nombre|lower == 'node' or tecnologia.nombre|lower == 'nodejs' %}
                                    <i class="fab fa-node-js"></i>
                                {% elif tecnologia.nombre|lower == 'github' or tecnologia.nombre|lower == 'git' %}
                                    <i class="fab fa-git-alt"></i>
                                {% elif tecnologia.nombre|lower == 'postgresql' or tecnologia.nombre|lower == 'postgres' %}
                                    <i class="fas fa-database"></i>
                                {% elif tecnologia.nombre|lower == 'api' %}
                                    <i class="fas fa-plug"></i>
                                {% else %}
                                    <i class="fas fa-code"></i>
                                {% endif %}
                                <span class="tech-name">{{ tecnologia.nombre }}</span>
                            </span>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}
                    
                    <div class="proyecto-meta-detalle mb-4">
                        <div class="meta-item">
                            <i class="fas fa-calendar-alt"></i>
                            <span>{{ proyecto.fecha_creacion|date:"d M Y" }}</span>
                        </div>
                    </div>
                    
                    {% if proyecto.url_demo or proyecto.url_github %}
                    <div class="proyecto-actions-detalle">
                        {% if proyecto.url_demo %}
                        <a href="{{ proyecto.url_demo }}" target="_blank" class="btn btn-custom-primary me-3">
                            <i class="fas fa-external-link-alt me-2"></i>Ver Demo
                        </a>
                        {% endif %}
                        {% if proyecto.url_github %}
                        <a href="{{ proyecto.url_github }}" target="_blank" class="btn btn-custom-secondary">
                            <i class="fab fa-github me-2"></i>Ver Código
                        </a>
                        {% endif %}
                    </div>
                    {% endif %}
                </div>
            </div>
            <div class="col-lg-6">
                <div class="proyecto-imagen-detalle animate-on-scroll">
                    {% if proyecto.imagen %}
                        <div class="imagen-container">
                            <img src="{{ proyecto.imagen.url }}" alt="{{ proyecto.titulo }}" class="img-fluid">
                            <div class="imagen-overlay">
                                <i class="fas fa-search-plus"></i>
                            </div>
                        </div>
                    {% else %}
                        <div class="proyecto-placeholder-detalle">
                            <i class="fas fa-laptop-code"></i>
                            <p class="mt-3">Imagen en desarrollo</p>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</section>

<!-- "Sobre este Proyecto" -->
<section class="sobre-proyecto-nueva">
    <div class="container-fluid-custom">
        <!-- Título principal -->
        <div class="animate-on-scroll">
            <h2 class="titulo-principal-nuevo">Sobre este Proyecto</h2>
            <p class="subtitulo-principal">
                Una exploración detallada de las tecnologías, metodologías y soluciones implementadas
            </p>
        </div>

        <div class="contenido-principal-amplio">
            <div class="descripcion-amplia animate-on-scroll">
                <h3>Visión y Desarrollo</h3>
                <p class="descripcion-texto">
                    {{ proyecto.descripcion }}
                </p>
                
                <ul class="caracteristicas-lista">
                    <li>
                        <i class="fas fa-check-circle"></i>
                        Arquitectura escalable y mantenible
                    </li>
                    <li>
                        <i class="fas fa-check-circle"></i>
                        Diseño responsivo y accesible
                    </li>
                    <li>
                        <i class="fas fa-check-circle"></i>
                        Optimización de rendimiento
                    </li>
                    <li>
                        <i class="fas fa-check-circle"></i>
                        Integración de APIs modernas
                    </li>
                    <li>
                        <i class="fas fa-check-circle"></i>
                        Seguridad implementada desde el diseño
                    </li>
                </ul>
            </div>

            <!-- Slideshow de imágenes del proyecto -->
            <div class="imagenes-proyecto animate-on-scroll">
                {% if proyecto.imagenes_galeria.all %}
                <div class="proyecto-slideshow">
                    <div class="slideshow-container">
                        {% for imagen in proyecto.imagenes_galeria.all %}
                        <div class="slide {% if forloop.first %}active{% endif %}">
                            <img src="{{ imagen.imagen.url }}" alt="{{ imagen.titulo|default:proyecto.titulo }}">
                            <div class="slide-overlay">
                                <div class="slide-title">{{ imagen.titulo|default:proyecto.titulo }}</div>
                                <div class="slide-description">{{ imagen.descripcion|default:"Captura del proyecto mostrando las funcionalidades principales" }}</div>
                            </div>
                        </div>
                        {% endfor %}
                        
                        <!-- Controles de navegación -->
                        <button class="slideshow-controls prev" onclick="changeSlide(-1)">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <button class="slideshow-controls next" onclick="changeSlide(1)">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
                {% elif proyecto.imagen %}
                <!-- Si solo tiene imagen principal, mostrarla en el slideshow -->
                <div class="proyecto-slideshow">
                    <div class="slideshow-container">
                        <div class="slide active">
                            <img src="{{ proyecto.imagen.url }}" alt="{{ proyecto.titulo }}">
                            <div class="slide-overlay">
                                <div class="slide-title">{{ proyecto.titulo }}</div>
                                <div class="slide-description">Vista principal del proyecto</div>
                            </div>
                        </div>
                    </div>
                </div>
                {% else %}
                <!-- Placeholder cuando no hay imágenes -->
                <div class="proyecto-slideshow">
                    <div class="slideshow-placeholder">
                        <i class="fas fa-images"></i>
                        <h4>Galería Visual</h4>
                        <p>Las imágenes del proyecto se añadirán próximamente para mostrar todas las funcionalidades y el diseño implementado</p>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- Highlights modernos -->
        <div class="highlights-modernos">
            <div class="highlight-moderno animate-on-scroll">
                <div class="highlight-icon-moderno">
                    <i class="fas fa-lightbulb"></i>
                </div>
                <h5>Innovación Tecnológica</h5>
                <p>Implementación de las últimas tendencias y mejores prácticas en desarrollo web, asegurando un producto moderno y competitivo en el mercado actual.</p>
            </div>
            
            <div class="highlight-moderno animate-on-scroll">
                <div class="highlight-icon-moderno">
                    <i class="fas fa-mobile-alt"></i>
                </div>
                <h5>Experiencia Multi-dispositivo</h5>
                <p>Diseño completamente responsivo que garantiza una experiencia fluida y consistente en smartphones, tablets y dispositivos de escritorio.</p>
            </div>
            
            <div class="highlight-moderno animate-on-scroll">
                <div class="highlight-icon-moderno">
                    <i class="fas fa-rocket"></i>
                </div>
                <h5>Rendimiento Optimizado</h5>
                <p>Código altamente optimizado con técnicas de carga rápida, lazy loading y compresión de recursos para tiempos de carga excepcionales.</p>
            </div>
        </div>
    </div>
</section>

<!-- Otros Proyectos -->
{% if otros_proyectos %}
<section class="otros-proyectos-section section-padding bg-light">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto text-center mb-5">
                <h2 class="section-title animate-on-scroll">Otros Proyectos</h2>
                <p class="section-subtitle animate-on-scroll">
                    Descubre más de mi trabajo y experiencia
                </p>
            </div>
        </div>
        <div class="row">
            {% for otro_proyecto in otros_proyectos %}
            <div class="col-lg-4 mb-4">
                <div class="proyecto-card animate-on-scroll">
                    <div class="proyecto-imagen">
                        {% if otro_proyecto.imagen %}
                            <img src="{{ otro_proyecto.imagen.url }}" alt="{{ otro_proyecto.titulo }}">
                        {% else %}
                            <div class="proyecto-placeholder">
                                <i class="fas fa-laptop-code"></i>
                            </div>
                        {% endif %}
                        <div class="proyecto-overlay">
                            <a href="{% url 'proyectos:detalle' otro_proyecto.slug %}" class="overlay-link">
                                <i class="fas fa-eye"></i>
                            </a>
                        </div>
                    </div>
                    <div class="proyecto-contenido">
                        <h5>{{ otro_proyecto.titulo }}</h5>
                        <p>{{ otro_proyecto.descripcion|truncatewords:15 }}</p>
                        <div class="proyecto-fecha">
                            <i class="fas fa-calendar-alt me-1"></i>
                            {{ otro_proyecto.fecha_creacion|date:"M Y" }}
                        </div>
                        {% if otro_proyecto.tecnologias.all %}
                        <div class="proyecto-tech mt-3">
                            {% for tech in otro_proyecto.tecnologias.all|slice:":3" %}
                                <span class="tech-badge-small">{{ tech.nombre }}</span>
                            {% endfor %}
                            {% if otro_proyecto.tecnologias.count > 3 %}
                                <span class="tech-badge-small more">+{{ otro_proyecto.tecnologias.count|add:"-3" }}</span>
                            {% endif %}
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <div class="text-center mt-4">
            <a href="{% url 'proyectos:lista_proyectos' %}" class="btn btn-outline-primary">
                <i class="fas fa-folder me-2"></i>Ver Todos los Proyectos
            </a>
        </div>
    </div>
</section>
{% endif %}

<!-- Contacto -->
<section class="contacto-mejorado-section section-padding">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto text-center mb-5">
                <h2 class="section-title text-white animate-on-scroll">¿Te gustó este proyecto?</h2>
                <p class="section-subtitle text-white-50 animate-on-scroll">
                    Me encantaría colaborar contigo en tu próximo proyecto. Hablemos sobre cómo puedo ayudarte a hacer realidad tus ideas.
                </p>
            </div>
        </div>
        
        <div class="row">
            <div class="col-lg-10 mx-auto">
                <div class="contacto-grid">
                    <!-- Tarjeta principal de contacto -->
                    <div class="contacto-card-principal animate-on-scroll">
                        <div class="contacto-icon">
                            <i class="fas fa-handshake"></i>
                        </div>
                        <h4>Trabajemos Juntos</h4>
                        <p class="mb-4">¿Tienes un proyecto en mente? Me especializo en crear soluciones web innovadoras con Django, JavaScript y tecnologías modernas.</p>
                        <div class="contacto-buttons">
                            <a href="mailto:mateudani97@gmail.com" class="btn btn-custom-primary me-3">
                                <i class="fas fa-envelope me-2"></i>Enviar Email
                            </a>
                            <a href="https://www.linkedin.com/in/danimateu14/" target="_blank" class="btn btn-custom-secondary">
                                <i class="fab fa-linkedin me-2"></i>LinkedIn
                            </a>
                        </div>
                    </div>
                    
                    <!-- Información de contacto -->
                    <div class="contacto-info-cards">
                        <div class="contacto-info-item animate-on-scroll">
                            <div class="info-icon">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <div class="info-content">
                                <h6>Email</h6>
                                <a href="mailto:mateudani97@gmail.com">mateudani97@gmail.com</a>
                            </div>
                        </div>
                        
                        <div class="contacto-info-item animate-on-scroll">
                            <div class="info-icon">
                                <i class="fab fa-linkedin"></i>
                            </div>
                            <div class="info-content">
                                <h6>LinkedIn</h6>
                                <a href="https://www.linkedin.com/in/danimateu14/" target="_blank">danimateu14</a>
                            </div>
                        </div>
                        
                        <div class="contacto-info-item animate-on-scroll">
                            <div class="info-icon">
                                <i class="fab fa-github"></i>
                            </div>
                            <div class="info-content">
                                <h6>GitHub</h6>
                                <a href="https://github.com/danielmateu14" target="_blank">danielmateu14</a>
                            </div>
                        </div>
                        
                        <div class="contacto-info-item animate-on-scroll">
                            <div class="info-icon">
                                <i class="fas fa-briefcase"></i>
                            </div>
                            <div class="info-content">
                                <h6>Especialidades</h6>
                                <span>Django • JavaScript • APIs REST</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script src="{% static 'proyectos/js/detalle.js' %}"></script>
{% endblock %}